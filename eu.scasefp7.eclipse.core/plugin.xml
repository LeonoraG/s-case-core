<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>


   <extension point="org.eclipse.ui.commands">
      <category id="eu.scasefp7.eclipse.core.commands.category" name="Core Commands Category"/>
      <command categoryId="eu.scasefp7.eclipse.core.commands.category" id="eu.scasefp7.eclipse.core.commands.testOntology" name="Test Export to ontology"/>
   </extension>
   <extension point="org.eclipse.ui.commands">
      <category id="eu.scasefp7.eclipse.core.commands.category" name="Core Commands Category"/>
      <command categoryId="eu.scasefp7.eclipse.core.commands.category" id="eu.scasefp7.eclipse.core.commands.testSetup" name="Test project setup"/>
   </extension>

   <extension point="org.eclipse.ui.handlers">
      <handler class="eu.scasefp7.eclipse.core.handlers.TestOntologyHandler" commandId="eu.scasefp7.eclipse.core.commands.testOntology">
      	 <enabledWhen>
     		<with variable="selection">
		        <iterate ifEmpty="false">
		             <adapt type="org.eclipse.core.resources.IResource">
			              <test property="org.eclipse.core.resources.name" value="*.rqs" />
			         </adapt>
				</iterate>
			</with>
		 </enabledWhen>
      </handler>
   </extension>
   <extension point="org.eclipse.ui.handlers">
      <handler class="eu.scasefp7.eclipse.core.handlers.TestOntologyHandler" commandId="eu.scasefp7.eclipse.core.commands.testSetup">
      	 <enabledWhen>
      	 	<with variable="selection">
      	 		<iterate>
                    <adapt type="org.eclipse.core.resources.IResource">
                       <not>
                         <test property="org.eclipse.core.resources.projectNature" value="org.eclipse.jdt.core.javanature"/>
                       </not>
                    </adapt>
             	</iterate>
                <count value="1" />
		    </with>         
		 </enabledWhen>
      </handler>
   </extension>
   
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
            <command commandId="eu.scasefp7.eclipse.core.commands.testOntology" id="eu.scasefp7.eclipse.core.menus.testOntology">
                  <visibleWhen>
				           <with variable="activeMenuSelection">
				            <iterate ifEmpty="false">
				             <adapt type="org.eclipse.core.resources.IResource">
				               <test property="org.eclipse.core.resources.name" value="*" />
				             </adapt>
				            </iterate>
				           </with>
                  </visibleWhen>
            </command>
      </menuContribution>
      <menuContribution locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
            <command commandId="eu.scasefp7.eclipse.core.commands.testSetup" id="eu.scasefp7.eclipse.core.menus.testSetup">
                  <visibleWhen>
				           <with variable="activeMenuSelection">
				            <iterate ifEmpty="false">
				             <adapt type="org.eclipse.core.resources.IResource">
				               <not>
				                 <test property="org.eclipse.core.resources.projectNature" value="org.eclipse.jdt.core.javanature" />
				               </not>
				             </adapt>
				            </iterate>
				           </with>
                  </visibleWhen>
            </command>
      </menuContribution>
   </extension>

</plugin>
